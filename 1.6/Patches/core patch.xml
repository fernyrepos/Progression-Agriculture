<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <!-- Traders -->

    <Operation Class="PatchOperationConditional">
        <xpath>Defs/FactionDef[(techLevel = "Undefined" or techLevel = "Animal" or techLevel = "Neolithic" or techLevel = "Medieval" or techLevel = "Industrial")]/caravanTraderKinds</xpath>
        <match Class="PatchOperationAdd">
            <xpath>Defs/FactionDef[(techLevel = "Undefined" or techLevel = "Animal" or techLevel = "Neolithic" or techLevel = "Medieval" or techLevel = "Industrial")]/caravanTraderKinds</xpath>
            <value>
                <li>AgriculturalTrader</li>
            </value>
        </match>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/TraderKindDef[contains(defName, "Bulk")]/stockGenerators</xpath>
        <value>
            <li Class="StockGenerator_Tag">
                <tradeTag>Seeds</tradeTag>
                <thingDefCountRange>2~4</thingDefCountRange>
                <countRange>1~1</countRange>
            </li>
        </value>
    </Operation>


    <!-- Rename plant -->
    <Operation Class="PatchOperationReplace">
        <success>Always</success>
        <xpath>Defs/ThingDef[defName="PlantPot"]/label</xpath>
        <value>
            <label>plant decoration</label>
        </value>
    </Operation>

    <!-- NO PREREQUISITES UNLESS IT'S AN SOS2 PLANT or tree -->
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/ThingDef/plant/sowResearchPrerequisites</xpath>
        <match Class="PatchOperationRemove">
            <xpath>Defs/ThingDef/plant/sowResearchPrerequisites/li[not(text()="ArchotechPlants") 
            and not(text()="TreeSowing") 
            and not(text()="Cocoa") 
            and not(text()="DankPyon_TreeGriffonBerry") 
            and not(text()="DV_GolemResearch_AnimaBlooms") 
            and not(text()="TSF_CherryBlossomSowing") 
        ]</xpath>
        </match>
    </Operation>

    <!-- FUCK THESE RESEARCH PROJECTS -->
    <!-- <Operation Class="PatchOperationRemove">
        <success>Always</success>
        <xpath>Defs/ResearchProjectDef[defName="Cocoa"]</xpath>
    </Operation> -->
    <Operation Class="PatchOperationRemove">
        <success>Always</success>
        <xpath>Defs/ResearchProjectDef[defName="Devilstrand"]</xpath>
    </Operation>



    <!-- SCENARIO PATCHES -->

    <!-- CRASHLANDED -->
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>Defs/ScenarioDef[defName="Crashlanded"]/scenario/parts</xpath>
        <value>
            <li Class="RandomVegetables.ScenPart_RandomSeedBundles">
                <_itemCount>2</_itemCount>
                <def>RandomSeedBundles</def>
            </li>
            <li Class="ProgressionAgriculture.ScenPart_StartingSeeds">
                <def>Ferny_StartingSeeds</def>
                <thingDef>Plant_Healroot_SeedBundle</thingDef>
            </li>
            <li Class="ProgressionAgriculture.ScenPart_StartingSeeds">
                <def>Ferny_StartingSeeds</def>
                <thingDef>Plant_Cotton_SeedBundle</thingDef>
            </li>
            <li Class="ProgressionAgriculture.ScenPart_StartingSeeds">
                <def>Ferny_StartingSeeds</def>
                <thingDef>Plant_Psychoid_SeedBundle</thingDef>
            </li>
        </value>
    </Operation>

    <!-- LOST TRIBE -->
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>Defs/ScenarioDef[defName="LostTribe"]/scenario/parts</xpath>
        <value>
            <li Class="RandomVegetables.ScenPart_RandomSeedBundles">
                <_itemCount>1</_itemCount>
                <def>RandomSeedBundles</def>
            </li>
            <li Class="ProgressionAgriculture.ScenPart_StartingSeeds">
                <def>Ferny_StartingSeeds</def>
                <thingDef>Plant_Healroot_SeedBundle</thingDef>
            </li>
        </value>
    </Operation>

    <!-- RICH EXPLORER -->
    <Operation Class="PatchOperationAdd">
        <success>Always</success>
        <xpath>Defs/ScenarioDef[defName="TheRichExplorer"]/scenario/parts</xpath>
        <value>
            <li Class="ProgressionAgriculture.ScenPart_StartingSeeds">
                <def>Ferny_StartingSeeds</def>
                <thingDef>Plant_Healroot_SeedBundle</thingDef>
            </li>
            <li Class="ProgressionAgriculture.ScenPart_StartingSeeds">
                <def>Ferny_StartingSeeds</def>
                <thingDef>Plant_Cotton_SeedBundle</thingDef>
            </li>
            <li Class="ProgressionAgriculture.ScenPart_StartingSeeds">
                <def>Ferny_StartingSeeds</def>
                <thingDef>Plant_Psychoid_SeedBundle</thingDef>
            </li>
            <li Class="RandomVegetables.ScenPart_RandomSeedBundles">
                <_itemCount>2</_itemCount>
                <def>RandomSeedBundles</def>
            </li>
        </value>
    </Operation>

</Patch>